{
  "$schema": "http://json-schema.org/draft-07/schema",
  "definitions": {
    "isObject": { "type": "object" },
    "detectedTypes": {
      "definitions": {
        "int": { "$anchor": "isType.int", "properties": { "type": { "const": "integer" } }, "required": [ "type" ] },
        "long": { "$anchor": "isType.long", "properties": { "type": { "const": "long" } }, "required": [ "type" ] },
        "float": { "$anchor": "isType.float", "properties": { "type": { "const": "float" } }, "required": [ "type" ] },
        "string": { "$anchor": "isType.string", "properties": { "type": { "const": "string" } }, "required": [ "type" ] },
        "bool": { "$anchor": "isType.bool", "properties": { "type": { "const": "boolean" } }, "required": [ "type" ] },
        "enum": { "$anchor": "isType.enum", "properties": { "type": { "const": "enum" } }, "required": [ "type" ] }
      }
    },
    "prop": {
      "definitions": {
        "not": { "properties": { "type": { "type": "string" } } },
        "enum": {
          "not": { "$ref": "#/definitions/prop/definitions/not" },
          "allOf": [ { "$ref": "props/prop/base.json#objProps.enum" } ]
        },
        "int": {
          "not": { "$ref": "#/definitions/prop/definitions/not" },
          "allOf": [ { "$ref": "props/prop/base.json#objProps.int" } ]
        },
        "long": {
          "not": { "$ref": "#/definitions/prop/definitions/not" },
          "allOf": [ { "$ref": "props/prop/base.json#objProps.long" } ]
        },
        "float": {
          "not": { "$ref": "#/definitions/prop/definitions/not" },
          "allOf": [ { "$ref": "props/prop/base.json#objProps.float" } ]
        },
        "string": {
          "not": { "$ref": "#/definitions/prop/definitions/not" },
          "allOf": [ { "$ref": "props/prop/base.json#objProps.string" } ]
        },
        "bool": {
          "not": { "$ref": "#/definitions/prop/definitions/not" },
          "allOf": [ { "$ref": "props/prop/base.json#objProps.bool" } ]
        }
      }
    },
    "props": {
      "definitions": {
        "enum": { "if": { "$ref": "#/definitions/isObject" }, "then": { "additionalProperties": { "if": { "$ref": "#/definitions/isObject" }, "then": { "$ref": "#/definitions/prop/definitions/enum" } } } },
        "int": { "if": { "$ref": "#/definitions/isObject" }, "then": { "additionalProperties": { "if": { "$ref": "#/definitions/isObject" }, "then": { "$ref": "#/definitions/prop/definitions/int" } } } },
        "long": { "if": { "$ref": "#/definitions/isObject" }, "then": { "additionalProperties": { "if": { "$ref": "#/definitions/isObject" }, "then": { "$ref": "#/definitions/prop/definitions/long" } } } },
        "float": { "if": { "$ref": "#/definitions/isObject" }, "then": { "additionalProperties": { "if": { "$ref": "#/definitions/isObject" }, "then": { "$ref": "#/definitions/prop/definitions/float" } } } },
        "string": { "if": { "$ref": "#/definitions/isObject" }, "then": { "additionalProperties": { "if": { "$ref": "#/definitions/isObject" }, "then": { "$ref": "#/definitions/prop/definitions/string" } } } },
        "bool": { "if": { "$ref": "#/definitions/isObject" }, "then": { "additionalProperties": { "if": { "$ref": "#/definitions/isObject" }, "then": { "$ref": "#/definitions/prop/definitions/bool" } } } }
      }
    },
    "typed": {
      "definitions": {
        "enum": { "allOf": [ { "properties": { "properties": { "$ref": "#/definitions/props/definitions/enum" } } } ] },
        "int": { "allOf": [ { "properties": { "properties": { "$ref": "#/definitions/props/definitions/int" } } } ] },
        "long": { "allOf": [ { "properties": { "properties": { "$ref": "#/definitions/props/definitions/long" } } } ] },
        "float": { "allOf": [ { "properties": { "properties": { "$ref": "#/definitions/props/definitions/float" } } } ] },
        "string": { "allOf": [ { "properties": { "properties": { "$ref": "#/definitions/props/definitions/string" } } } ] },
        "bool": { "allOf": [ { "properties": { "properties": { "$ref": "#/definitions/props/definitions/bool" } } } ] }
      },
      "allOf": [
        { "if": { "$ref": "#isType.enum" }, "then": { "$ref": "#/definitions/typed/definitions/enum" } },
        { "if": { "$ref": "#isType.int" }, "then": { "$ref": "#/definitions/typed/definitions/int" } },
        { "if": { "$ref": "#isType.long" }, "then": { "$ref": "#/definitions/typed/definitions/long" } },
        { "if": { "$ref": "#isType.float" }, "then": { "$ref": "#/definitions/typed/definitions/float" } },
        { "if": { "$ref": "#isType.string" }, "then": { "$ref": "#/definitions/typed/definitions/string" } },
        { "if": { "$ref": "#isType.bool" }, "then": { "$ref": "#/definitions/typed/definitions/bool" } }
      ]
    }
  },
  "properties": {
    "description_format": { "$ref": "../components/description.json" },
    "key_prefix": {
      "$ref": "common/short-key.json",
      "description": "Property names in this group will be prefixed with this value" },
    "key_suffix": {
      "$ref": "common/short-key.json",
      "description": "Property names in this group will be suffixed with this value" },
    "properties": { "oneOf": [
        { "$ref": "group/props.json" },
        { "$ref": "group/array-short-prop-list.json" } 
        ] }
  },
  "allOf": [
    { "$ref": "common/base.json" },
    { "if": { "properties": { "properties": { "$ref": "#/definitions/isObject" } } },
      "then": { "$ref": "#/definitions/typed" } }
  ],
  "unevaluatedProperties": false
}